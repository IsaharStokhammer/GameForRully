<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Awkward</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f72585, #7209b7);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    h1 {
      font-size: 4rem;
      margin-bottom: 1rem;
      animation: pop 1s ease-in-out infinite alternate;
    }
    @keyframes pop {
      from { transform: scale(1); }
      to { transform: scale(1.05); }
    }
    .card-custom {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 2rem;
      margin: 1rem;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      text-align: center;
      max-width: 600px;
      transition: transform 0.5s ease, opacity 0.5s ease;
    }
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s ease-out forwards;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    input {
      padding: 0.5rem;
      margin: 0.3rem;
      border-radius: 1rem;
      border: none;
    }
    .hidden { display: none; }
    .player-list {
      margin: 1rem 0;
      font-size: 1.2rem;
    }
    .current-player {
      font-weight: bold;
      color: #fffd74;
      text-shadow: 1px 1px 2px black;
      animation: pulse 1s infinite;
      display: block;
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.07); }
      100% { transform: scale(1); }
    }
    #winner-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: white;
      color: black;
      padding: 2rem;
      border-radius: 1rem;
      text-align: center;
      display: none;
      z-index: 9999;
    }
    .section-box {
      padding: 1rem;
      border-radius: 1rem;
      margin-bottom: 1rem;
    }
    .section-questions {
      background-color: rgba(0, 123, 255, 0.2);
    }
    .section-turns {
      background-color: rgba(108, 117, 125, 0.2);
    }
    .section-score {
      background-color: rgba(40, 167, 69, 0.2);
    }
    .section-utils {
      background-color: rgba(220, 53, 69, 0.2);
    }
  </style>
</head>
<body>
  <audio id="bg-music" src="https://cdn.pixabay.com/download/audio/2022/10/21/audio_91db3d1f6d.mp3?filename=chill-ambient-112194.mp3" autoplay loop></audio>
  <h1>Awkward</h1>
  <div class="card-custom" id="player-setup">
    <h2>הכנס שמות שחקנים</h2>
    <div id="player-inputs">
      <input type="text" placeholder="שחקן 1" class="form-control fade-in" />
      <input type="text" placeholder="שחקן 2" class="form-control fade-in" />
    </div>
    <button class="btn btn-light m-2" onclick="addPlayerInput()">הוסף שחקן</button>
    <button class="btn btn-success m-2" onclick="startGame()">התחל משחק</button>
  </div>

  <div class="card-custom hidden" id="game">
    <div id="current-player-name" class="current-player"></div>
    <div id="question" class="mb-3 fw-bold fs-4">Press Start to begin</div>
    <div class="player-list" id="player-status"></div>

    <div class="section-box section-questions">
      <h5>🎲 שאלות</h5>
      <button class="btn btn-primary m-1" onclick="nextQuestion()">שאלה</button>
      <button class="btn btn-warning m-1" onclick="nextTwist()">טוויסט</button>
      <button class="btn btn-info m-1" onclick="nextRandom()">אקראי</button>
    </div>

    <div class="section-box section-turns">
      <h5>🏁 תורות</h5>
      <button class="btn btn-secondary m-1" onclick="nextPlayer()">תור הבא</button>
    </div>

    <div class="section-box section-score">
      <h5>⭐ ניקוד</h5>
      <button class="btn btn-success m-1" onclick="addPoint()">+ נקודה</button>
    </div>

    <div class="section-box section-utils">
      <h5>🔧 אחר</h5>
      <button class="btn btn-danger m-1" onclick="resetGame()">איפוס</button>
    </div>

    <div class="mt-4">
      <input type="text" id="customQuestion" placeholder="הוסף שאלה משלך..." class="form-control mb-2">
      <button class="btn btn-outline-light" onclick="addCustomQuestion()">➕ הוסף שאלה</button>
    </div>
  </div>

  <div id="winner-modal"></div>
  <script>
    const questions = [
      "למי אתה הכי נמשך בשולחן?",
      "כמה יש לך בעו\"ש ברגע זה?",
      "בגלגול הבא, היית בוחר להיות גבר או אישה?",
      "כסף או אושר?",
      "מה ההרגל הכי מוזר שלך?",
      "מי מהאנשים כאן הכי פחות היית רוצה לפגוש ברחוב במקרה?",
      "מה השקר האחרון שסיפרת?",
      "אם היית חייב לחשוף סוד – איזה זה היה?",
      "מהי חיית הכוח שלך?",
      "האם הילדות שלך הייתה רעה או רעה פחות?",
      "מה אתה עושה כאן בעצם?",
      "כמה אתה משעמם את עצמך?",
      "תאר ארוחת חצות מושחתת.",
      "מה הגילטי פלז'ר שלך?",
      "ספר על הפדיחה הכי גדולה שלך בחיים.",
      "מתי בכית לאחרונה ולמה?",
      "מה היית משנה בעצמך אם היית יכול?",
      "מה הפחד הכי גדול שלך?",
      "מה המחשבה הכי לא ראויה שעברה לך בראש?",
      "אם היית יכול לחזור לרגע אחד בחיים – מה הוא היה?"
    ];

    const twists = [
      "קלף טוויסט: העבר את השאלה למישהו אחר!",
      "קלף טוויסט: אתה מקבל נקודה אם תבצע פעולה אמיצה!",
      "קלף טוויסט: גנוב נקודה מהשחקן שלידך!",
      "קלף טוויסט: תמציא שאלה חדשה לשולחן!",
      "קלף טוויסט: אתה עונה במקום מישהו אחר!",
      "קלף טוויסט: דו-קרב כנות – שניים עונים, הקבוצה בוחרת מי היה הכי אמיתי!",
      "קלף טוויסט: השחקן עם הכי הרבה נקודות מאבד נקודה!"
    ];

    let players = [];
    let currentPlayer = 0;

    function addPlayerInput() {
      const div = document.getElementById('player-inputs');
      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = `שחקן ${div.children.length + 1}`;
      input.className = 'form-control fade-in';
      div.appendChild(input);
    }

    function startGame() {
      const inputs = document.querySelectorAll('#player-inputs input');
      players = Array.from(inputs)
        .map(input => input.value.trim())
        .filter(name => name.length > 0)
        .map(name => ({ name, score: 0 }));
      if (players.length === 0) return;

      document.getElementById('player-setup').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      updatePlayerStatus();
      nextRandom();
    }

    function updatePlayerStatus() {
      const statusDiv = document.getElementById('player-status');
      statusDiv.innerHTML = players
        .map((p, i) => `<span class="${i === currentPlayer ? 'current-player' : ''}">${i === currentPlayer ? '➡️ ' : ''}${p.name}: ${p.score}</span>`)
        .join('<br>');
    }

    function nextPlayer() {
      currentPlayer = (currentPlayer + 1) % players.length;
      updatePlayerStatus();
    }

    function addPoint() {
      players[currentPlayer].score++;
      updatePlayerStatus();
      checkWinner();
    }

    function checkWinner() {
      const winner = players.find(p => p.score >= 5);
      if (winner) {
        confetti();
        const modal = document.getElementById('winner-modal');
        modal.innerHTML = `<h2>🎉 ${winner.name} ניצח/ה את המשחק! 🎉</h2><button class='btn btn-dark mt-3' onclick='resetGame()'>משחק חדש</button>`;
        modal.style.display = 'block';
      }
    }

    function animateQuestion(text) {
      const el = document.getElementById('question');
      el.classList.remove('fade-in');
      void el.offsetWidth;
      el.textContent = text;
      el.classList.add('fade-in');
    }

    function nextQuestion() {
      const card = questions[Math.floor(Math.random() * questions.length)];
      animateQuestion(card);
    }

    function nextTwist() {
      const card = twists[Math.floor(Math.random() * twists.length)];
      animateQuestion(card);
    }

    function nextRandom() {
      const rand = Math.random();
      const card = rand < 0.75
        ? questions[Math.floor(Math.random() * questions.length)]
        : twists[Math.floor(Math.random() * twists.length)];
      animateQuestion(card);
    }

    function addCustomQuestion() {
      const input = document.getElementById('customQuestion');
      const value = input.value.trim();
      if (value.length > 3) {
        questions.push(value);
        alert("השאלה נוספה לרשימה! 🙌");
        input.value = "";
      }
    }

    function resetGame() {
      location.reload();
    }
  </script>
</body>
</html>
